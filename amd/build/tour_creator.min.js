/**
 * JavaScript for handling tour creation via button click.
 *
 * @module     block_course_audit/tour_creator
 * @copyright  2024 Your Name <your.email@example.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_course_audit/tour_creator",["jquery","core/ajax","core/notification","core/str","core/config"],(function($,Ajax,Notification,Str,Config){const addMiauSprite=function(){const $speechBubble=$("<div>").attr({id:"miau-speech-bubble","aria-hidden":"true"}).html('<a href="'+Config.wwwroot+'/blocks/course_audit/wiki.php" target="_blank">\n            <span id="miau-title">MIau.nrw</span></a>');$speechBubble.append($("<div>").attr({id:"miau-speech-bubble-inner"}));const $miauContainer=$("<div>").attr({id:"miau-gif","aria-hidden":"true",role:"presentation",tabindex:"0"}),$bubbleContainer=$("<div>").attr({id:"bubble-container","aria-hidden":"true",role:"presentation"});$bubbleContainer.append($speechBubble),$("#page").append($miauContainer),$miauContainer.click((function(){if($speechBubble.is(":visible"))$bubbleContainer.remove();else{$miauContainer.append($bubbleContainer);var $original=$("#block-course-audit"),$copy=$original.clone();$original.hide(),$("#miau-speech-bubble").append($copy)}}))};return{init:function(courseId){addMiauSprite(),$("#audit-start").on("click",(function(e){e.preventDefault();const $button=$(this),originalText=$button.text();$button.prop("disabled",!0),Str.get_string("creatingtour","block_course_audit").then((function(loadingText){return $button.text(loadingText),Ajax.call([{methodname:"block_course_audit_create_tour",args:{courseid:courseId}}])[0]})).then((function(response){return console.log("Tour created successfully:",response),Str.get_string("toursuccess","block_course_audit")})).then((function(successText){$button.text(successText),setTimeout((function(){window.location.reload()}),500)})).catch((function(error){console.error("Error creating tour:",error),Notification.exception(error),$button.text(originalText),$button.prop("disabled",!1)}))}))}}}));

//# sourceMappingURL=tour_creator.min.js.map